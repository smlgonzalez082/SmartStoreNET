@model CheckoutProgressModel
@using SmartStore.Web.Models.Checkout;

@{
    var progresses = new List<dynamic> {
// Cart
new {
Step = CheckoutProgressStep.Cart,
StepName = "cart",
Label =  T("Checkout.Progress.Cart").Text,
Visited = Model.CheckoutProgressStep > CheckoutProgressStep.Cart,
Active = Model.CheckoutProgressStep == CheckoutProgressStep.Cart,
Href = Url.RouteUrl("ShoppingCart"),
VisibleXS = true
},
// Address
new {
Step = CheckoutProgressStep.Address,
StepName = "address",
Label =  T("Checkout.Progress.Address").Text,
Visited = Model.CheckoutProgressStep > CheckoutProgressStep.Address,
Active = Model.CheckoutProgressStep == CheckoutProgressStep.Address,
Href = Url.Action("BillingAddress") ,
VisibleXS = false
},
// Shipping
/*
new {
Step = CheckoutProgressStep.Shipping,
StepName = "shipping",
Label =  T("Checkout.Progress.Shipping").Text,
Visited = Model.CheckoutProgressStep > CheckoutProgressStep.Shipping,
Active = Model.CheckoutProgressStep == CheckoutProgressStep.Shipping,
Href = Url.Action("ShippingMethod") ,
VisibleXS = false
},      */
// Payment
new {
Step = CheckoutProgressStep.Payment,
StepName = "payment",
Label =  T("Checkout.Progress.Payment").Text,
Visited = Model.CheckoutProgressStep > CheckoutProgressStep.Payment,
Active = Model.CheckoutProgressStep == CheckoutProgressStep.Payment,
Href = Url.Action("PaymentMethod"),
VisibleXS = true
},
// Confirm
new {
Step = CheckoutProgressStep.Confirm,
StepName = "confirm",
Label =  T("Checkout.Progress.Confirm").Text,
Visited = Model.CheckoutProgressStep > CheckoutProgressStep.Confirm,
Active = Model.CheckoutProgressStep == CheckoutProgressStep.Confirm,
Href = Url.Action("Confirm"),
VisibleXS = false
},
// Complete
new {
Step = CheckoutProgressStep.Complete,
StepName = "complete",
Label =  T("Checkout.Progress.Complete").Text,
Visited = Model.CheckoutProgressStep > CheckoutProgressStep.Complete,
Active = Model.CheckoutProgressStep == CheckoutProgressStep.Complete,
Href = "javascript:void(0)" ,
VisibleXS = true
}
};
}




<div class="container clearfix costepsmargin">
    @*<div class="container clearfix ">*@
        <div class="costeps row no-gutters" style="flex-wrap:nowrap">

            @{ Html.RenderWidget("checkout_steps_before"); }


            @foreach (var p in progresses)
            {
                string stateClass = null;
                string href = p.Visited || p.Active ? p.Href : "javascript:void(0)";
                if (p.Visited)
                {
                    stateClass = "visited";
                }
                else if (p.Active)
                {
                    stateClass = "active";
                }
                else
                {
                    stateClass = "inactive";
                }

                <div class="col-2 costep @stateClass @(!p.VisibleXS ? "hidden-xs" : "")" data-step="@p.StepName" style="flex:0 0 11%">
                    <a class="costep-link" href="@href">
                        <i class="costep-icon"></i>
                        <span class="costep-label">@p.Label</span>
                    </a>
                </div>
            }
        </div>

        @{ Html.RenderWidget("checkout_steps_after"); }
    </div>
